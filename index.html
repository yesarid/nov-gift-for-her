<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Sana Özel Buket</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: radial-gradient(circle at center bottom, #2a1f2d 0%, #0f0f1a 100%);
            font-family: 'Courier New', Courier, monospace;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
        }

        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        #message-box {
            z-index: 10;
            /* Mobilde daha yukarıda dursun diye 5vh yaptık */
            margin-top: 5vh; 
            text-align: center;
            pointer-events: none;
            background: rgba(0, 0, 0, 0.3); /* Biraz daha şeffaf */
            padding: 15px 25px;
            border-radius: 15px;
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 105, 180, 0.2);
            animation: slideDown 1.5s ease-out;
            max-width: 90%; /* Mobilde kenarlara yapışmasın */
        }

        h1 {
            color: #ff69b4;
            font-size: 1.8rem; /* Mobilde çok büyük olmasın */
            margin: 0;
            text-shadow: 0 0 15px rgba(255, 105, 180, 0.6);
            line-height: 1.2;
        }

        .typewriter {
            overflow: hidden; 
            white-space: nowrap; 
            margin: 5px auto 0; /* Üstten az boşluk */
            letter-spacing: .10em; 
            animation: typing 3.5s steps(40, end);
            font-size: 0.9rem;
            color: #ddd;
            border-right: .15em solid orange;
        }
        
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        
        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Küçük ekranlar (Mobil) için özel ayarlar */
        @media screen and (max-width: 600px) {
            h1 { font-size: 1.5rem; }
            #message-box { margin-top: 8vh; padding: 10px 20px; }
            .typewriter { font-size: 0.8rem; letter-spacing: 0.05em; }
        }

    </style>
</head>
<body>

    <div id="message-box">
        <h1>Tek Bir Kök, Binbir Renk</h1>
        <div style="display: inline-block;">
            <p class="typewriter">Seninle her şey bir bütün...</p>
        </div>
    </div>

    <canvas id="bouquet"></canvas>

    <script>
        const canvas = document.getElementById('bouquet');
        const ctx = canvas.getContext('2d');

        let width, height;
        let stems = [];

        function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
        }
        window.addEventListener('resize', resize);
        resize();

        class BouquetStem {
            constructor(angle, lengthScale, delay) {
                this.rootX = width / 2;
                this.rootY = height;
                
                // --- MOBİL AYARI ---
                // Ekran genişliği 600px'den küçükse mobil kabul et
                const isMobile = width < 600;

                const rad = angle * (Math.PI / 180);
                
                // Masaüstünde ekranın %40'ı, Mobilde %30'u baz alınsın.
                // Üzerine eklenen rastgelelik de mobilde daha az olsun.
                const baseHeightRatio = isMobile ? 0.35 : 0.45; 
                const varHeightRatio = isMobile ? 0.20 : 0.30;

                this.targetLength = (height * baseHeightRatio) + (lengthScale * (height * varHeightRatio));
                
                this.targetX = this.rootX + Math.cos(rad) * this.targetLength;
                this.targetY = this.rootY + Math.sin(rad) * this.targetLength;

                this.progress = 0; 
                this.growthSpeed = 0.005 + Math.random() * 0.005;
                this.delay = delay; 
                this.started = false;

                this.bloomRadius = 0;
                // Mobilde çiçek başları çok devasa olup birbirine girmesin
                const maxRBase = isMobile ? 20 : 30;
                const maxRVar = isMobile ? 25 : 40;
                this.maxBloomRadius = maxRBase + Math.random() * maxRVar;
                
                this.isBlooming = false;
                
                this.thickness = (isMobile ? 1.5 : 2) + Math.random() * 3;
                this.stemColor = `hsl(${100 + Math.random()*30}, 60%, ${20 + Math.random()*20}%)`;
                
                const hues = [340, 300, 45, 10, 280]; 
                const selectedHue = hues[Math.floor(Math.random() * hues.length)];
                this.colorBase = { h: selectedHue, s: 80, l: 60 };
                this.petalCount = 300;
            }

            update() {
                if (this.delay > 0) {
                    this.delay--;
                    return;
                }
                this.started = true;

                if (this.progress < 1) {
                    this.progress += (1 - this.progress) * 0.02 + 0.001; 
                    if(this.progress > 0.99) {
                        this.progress = 1;
                        this.isBlooming = true;
                    }
                }

                if (this.isBlooming && this.bloomRadius < this.maxBloomRadius) {
                    this.bloomRadius += 0.5;
                }
            }

            draw() {
                if (!this.started) return;

                const cpX = this.rootX; 
                // Kavis noktası da mobilde biraz daha aşağıda olsun
                const cpY = this.rootY - (height * (width < 600 ? 0.2 : 0.3));

                const t = this.progress;
                const currentX = (1-t)*(1-t)*this.rootX + 2*(1-t)*t*cpX + t*t*this.targetX;
                const currentY = (1-t)*(1-t)*this.rootY + 2*(1-t)*t*cpY + t*t*this.targetY;

                ctx.beginPath();
                ctx.moveTo(this.rootX, this.rootY);
                const currentCpX = this.rootX + (cpX - this.rootX) * t;
                const currentCpY = this.rootY + (cpY - this.rootY) * t;
                
                ctx.quadraticCurveTo(currentCpX, currentCpY, currentX, currentY);
                ctx.strokeStyle = this.stemColor;
                ctx.lineWidth = this.thickness;
                ctx.lineCap = "round";
                ctx.stroke();

                if (this.bloomRadius > 1) {
                    ctx.save();
                    ctx.translate(currentX, currentY);

                    for (let i = 0; i < this.petalCount; i++) {
                        const angle = (i * 137.5) * (Math.PI / 180);
                        const r = (this.bloomRadius * Math.sqrt(i)) / Math.sqrt(this.petalCount);
                        const x = r * Math.cos(angle);
                        const y = r * Math.sin(angle);
                        const alpha = this.bloomRadius / this.maxBloomRadius;
                        
                        ctx.fillStyle = `hsla(${this.colorBase.h + (i%20)}, ${this.colorBase.s}%, ${this.colorBase.l}%, ${alpha})`;
                        ctx.beginPath();
                        ctx.ellipse(x, y, r/4, r/8, angle, 0, Math.PI * 2);
                        ctx.fill();
                    }
                    ctx.restore();
                }
            }
        }

        function createBouquet() {
            // Mobilde biraz daha az çiçek olsun ki performans düşmesin ve çok sıkışık görünmesin
            const isMobile = width < 600;
            const flowerCount = isMobile ? 30 : 40; 
            
            for (let i = 0; i < flowerCount; i++) {
                const spread = isMobile ? 60 : 80; // Mobilde açı daha dar
                const baseAngle = -90; 
                
                let randomAngleOffset = (Math.random() - 0.5) * spread;
                const angle = baseAngle + randomAngleOffset;

                const centerDist = Math.abs(randomAngleOffset) / (spread/2);
                const lengthScale = 0.6 + Math.random() * 0.4 + (1 - centerDist) * 0.3;

                const delay = Math.random() * 100;

                stems.push(new BouquetStem(angle, lengthScale, delay));
            }
        }

        function animate() {
            ctx.clearRect(0, 0, width, height);

            stems.forEach(stem => {
                stem.update();
                stem.draw();
            });

            drawRibbon();
            requestAnimationFrame(animate);
        }

        function drawRibbon() {
            ctx.save();
            ctx.fillStyle = "rgba(255, 105, 180, 0.8)"; 
            ctx.beginPath();
            ctx.arc(width/2, height - 20, 15, 0, Math.PI*2);
            ctx.fill();
            ctx.beginPath();
            ctx.ellipse(width/2 - 15, height - 20, 20, 10, -0.2, 0, Math.PI*2);
            ctx.ellipse(width/2 + 15, height - 20, 20, 10, 0.2, 0, Math.PI*2);
            ctx.fill();
            ctx.restore();
        }

        createBouquet();
        animate();

        window.addEventListener('click', () => {
            stems = [];
            createBouquet();
        });

    </script>
</body>
</html>
